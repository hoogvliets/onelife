# STRT - Personal Newsfeed Aggregator

STRT (formerly Onelife) is a minimalist, self-hosted personal newsfeed aggregator. It fetches content from Substack RSS feeds and Hacker News, presenting them in a clean, two-column layout. The project is designed to run entirely on GitHub Actions and GitHub Pages, requiring no external server infrastructure.

## Features

-   **Aggregated Feed**: Combines multiple Substack newsletters into a single, chronological feed.
-   **Hacker News Sidebar**: Displays the top stories from Hacker News.
-   **Read/Unread Tracking**: Locally tracks read articles to keep your feed fresh.
-   **Favorites**: Save interesting articles to a favorites list.
-   **Dark/Light Mode**: Toggle between themes.
-   **Responsive Design**: Works seamlessly on desktop and mobile.
-   **Zero Infrastructure**: Runs 100% on GitHub (Actions for backend, Pages for frontend).

## Project Structure

-   `index.html`, `css/`, `js/`: Frontend application.
-   `scripts/`: Python scripts for fetching and processing data.
-   `config/`: Configuration files for feeds.
-   `data/`: JSON data files generated by the backend (and served to the frontend).
-   `.github/workflows/`: GitHub Actions workflows for automation.

## Local Development

To run the project locally, you'll need Python 3.12+ and a local web server.

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/yourusername/onelife.git
    cd onelife
    ```

2.  **Set up Python environment**:
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    pip install -r requirements.txt  # If you have one, otherwise install dependencies manually:
    # pip install feedparser pyyaml python-dateutil requests
    ```
    *Note: The project uses `uv` in CI, but standard `pip` works fine locally.*

3.  **Fetch Data**:
    Run the data processing script to fetch feeds and generate the JSON files in `data/`.
    ```bash
    python3 scripts/process_data.py
    ```

4.  **Start Local Server**:
    You can use Python's built-in HTTP server to serve the frontend.
    ```bash
    python3 -m http.server 8000
    ```

5.  **View the App**:
    Open [http://localhost:8000](http://localhost:8000) in your browser.

## Deployment (GitHub Pages)

The project is configured to deploy automatically using GitHub Actions.

1.  **Push to GitHub**: Push your code to the `main` branch.
2.  **Enable GitHub Pages**:
    -   Go to your repository **Settings**.
    -   Navigate to **Pages**.
    -   Under **Build and deployment**, select **Source** as `GitHub Actions` (or `Deploy from a branch` if you prefer to serve the root directory of `main`, but Actions is recommended for the scheduled data updates).
    -   *Actually, the provided workflow `fetch-feeds.yml` commits data back to the repo. So you should set GitHub Pages to serve from the `main` branch (root folder).*

    **Correct GitHub Pages Setup:**
    -   **Source**: Deploy from a branch
    -   **Branch**: `main` / `/ (root)`

3.  **Scheduled Updates**:
    The `.github/workflows/fetch-feeds.yml` workflow is scheduled to run every 3 hours (`cron: '0 */3 * * *'`). It fetches new data, updates `data/feed.json` and `data/sidebar.json`, and commits the changes back to the repository. This triggers a GitHub Pages build (if configured to watch the branch).

## Configuration

### Adding/Removing Feeds

To change the content sources, edit the configuration files in the `config/` directory.

1.  **Substack Feeds**:
    Edit `config/tech-feed.yaml`. Add or remove RSS feed URLs under the `feeds` key.
    ```yaml
    feeds:
      - https://practicaldatamodeling.substack.com/feed
      - https://newsletter.pragmaticengineer.com/feed
      # Add your new feed here
    ```

2.  **Hacker News**:
    The Hacker News fetcher (`scripts/fetch_hackernews.py`) is currently hardcoded to fetch top stories. You can modify this script to fetch different stories (e.g., `newstories`, `beststories`) if desired.

3.  **LinkedIn**:
    (Experimental) LinkedIn profile URLs can be added to `config/linkedin-profiles.yaml`. Note that fetching data from LinkedIn without an API is difficult and may require additional setup or cookies.

## Customization

-   **Theme**: Edit `css/styles.css` to change colors and fonts. The `:root` variables define the color palette.
-   **Layout**: Modify `index.html` to change the structure. The app uses a template-based system for rendering cards.
